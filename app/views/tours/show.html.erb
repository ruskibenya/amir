<h1><%= @tour.name %></h1>
<p>Find me in app/views/tours/show.html.erb</p>

  <% @tour.activities.each do |activity| %>

      <div class="tour-recap" style="background-color: white">
        <p><%= activity.name %></p>
        <p><%= activity.starting_time.strftime "%d-%m-%Y %H:%M" %></p>
        <p><%= activity.ending_time.strftime "%d-%m-%Y %H:%M" %></p>
      </div>

  <% end %>

  <% @activities.each do |activity| %>
  <div class="choose-activity">
      <%= simple_form_for [@tour, activity] do |f| %>
      <%= activity.name %>
      <%= f.input :starting_time, as: :string, input_html: { class: "flatpickr-time"} %>
      <%= f.input :ending_time, as: :string, input_html: { class: "flatpickr-time"} %>

      <!-- <input type="text" name="starting_time" class="flatpickr-time" style="height: 30px;"> -->
      <!-- <input type="text" name="ending_time" class="flatpickr-time" style="height: 30px;"> -->
      <%= f.submit %>
  </div>
    <% end %>
  <% end %>



<!-- Button to send invitations to group -->

<h3>Tour's Schedule</h3>

<p> <%= link_to "Email Tour Invitations", send_invitations_path(@tour), method: :post %> </p>

<p> <%= link_to "See all tours", tours_path %> </p>

<h1> '<%=  @tour.name  %>'</h1>

<% step = 0 %>
<p> <%= @tour.start_date.strftime("%d %B %Y") %> </p>
<% Activity.where("tour_id = ?", @tour.id).each do |activity|  %>
  <% step += 1 %>
  <%= step %>
  <p>
    <% if activity.starting_time.day != @tour.start_date.day then %>
      <%= activity.starting_time.strftime("%A %d of %B %Y") %>
    <% end %>

  </p>
  <p> <%= activity.starting_time.strftime("%l%P") %> <%= activity.ending_time.strftime(" - %l%P") %>  </p>
  <p> <%= activity.category %> </p>
  <p> <%= activity.name %> </p>
  <p> <%= activity.address %>, <%= activity.city %> </p>
  <p>
    <% if activity.meeting_point then %>
      <%=  "meeting point 🏁"  %>
    <% end %>
  </p>
  <% end %>

<p> <%= @tour.end_date %> </p>


<h3>Tour's map</h3>
<div
  id="map"
  style="width: 100%; height: 600px;"
  data-markers="<%= @markers.to_json %>"
  ></div>

<% content_for :after_js do %>
<script type="text/javascript">
    document.querySelectorAll('.flatpickr-time').flatpickr({
    enableTime: true,
    minTime: "16:00",
    maxTime: "22:00"
    });
</script>
<% end %>
